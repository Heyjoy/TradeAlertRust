<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è´§å¸æ˜¾ç¤ºä¿®å¤æµ‹è¯•</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .price-display { font-size: 1.2em; font-weight: bold; margin: 10px 0; }
        .currency-symbol { color: #007bff; }
        button { padding: 8px 16px; margin: 5px; }
    </style>
</head>
<body>
    <h1>ğŸš€ è´§å¸æ˜¾ç¤ºä¿®å¤æµ‹è¯•</h1>
    
    <div class="test-section">
        <h3>1. é™æ€è´§å¸ç¬¦å·æµ‹è¯•</h3>
        <div class="price-display">
            ç¾è‚¡ AAPL: <span class="currency-symbol" data-symbol="AAPL">$</span>150.20
        </div>
        <div class="price-display">
            Aè‚¡ 000001.SZ: <span class="currency-symbol" data-symbol="000001.SZ">$</span>11.84
        </div>
        <div class="price-display">
            åŠ å¯†è´§å¸ BTC: <span class="currency-symbol" data-symbol="BTC">$</span>42000.00
        </div>
        <button onclick="initializeCurrencySymbols()">ä¿®å¤è´§å¸ç¬¦å·</button>
    </div>
    
    <div class="test-section">
        <h3>2. APIå“åº”æµ‹è¯•</h3>
        <div id="api-test-result">ç‚¹å‡»æŒ‰é’®æµ‹è¯•API...</div>
        <button onclick="testAPI()">æµ‹è¯•APIå“åº”</button>
    </div>
    
    <div class="test-section">
        <h3>3. åŠ¨æ€ä»·æ ¼æ›´æ–°æµ‹è¯•</h3>
        <div class="price-display">
            å½“å‰ä»·æ ¼: <span id="dynamic-price">åŠ è½½ä¸­...</span>
        </div>
        <button onclick="loadPriceWithCurrency('AAPL')">åŠ è½½ç¾è‚¡ä»·æ ¼</button>
        <button onclick="loadPriceWithCurrency('000001.SZ')">åŠ è½½Aè‚¡ä»·æ ¼</button>
    </div>

    <script>
        // åˆå§‹åŒ–é™æ€è´§å¸ç¬¦å·
        function initializeCurrencySymbols() {
            $('.currency-symbol').each(function() {
                const symbol = $(this).data('symbol');
                if (symbol) {
                    const currencySymbol = getCurrencySymbol(symbol);
                    $(this).text(currencySymbol);
                    $(this).css('color', 'green');
                }
            });
        }

        // æ ¹æ®è‚¡ç¥¨ä»£ç è·å–è´§å¸ç¬¦å·
        function getCurrencySymbol(symbol) {
            if (symbol.endsWith('.SZ') || symbol.endsWith('.SS') || symbol.endsWith('.SH')) {
                return 'Â¥';
            } else if (symbol.includes('BTC') || symbol.includes('ETH') || symbol.includes('USDT')) {
                return '';
            } else {
                return '$';
            }
        }

        // æµ‹è¯•APIå“åº”
        function testAPI() {
            const testData = {
                symbol: "AAPL",
                price: 150.20,
                currency_symbol: "$",
                market: "us"
            };
            
            $('#api-test-result').html(`
                <div style="background: #e8f5e8; padding: 10px; border-radius: 5px;">
                    <strong>æ¨¡æ‹ŸAPIå“åº”:</strong><br>
                    Symbol: ${testData.symbol}<br>
                    Price: ${testData.price}<br>
                    Currency Symbol: ${testData.currency_symbol}<br>
                    Market: ${testData.market}<br>
                    <br>
                    <strong>æ ¼å¼åŒ–æ˜¾ç¤º:</strong> ${testData.currency_symbol}${testData.price.toFixed(2)}
                </div>
            `);
        }

        // æ¨¡æ‹ŸåŠ¨æ€ä»·æ ¼åŠ è½½
        function loadPriceWithCurrency(symbol) {
            $('#dynamic-price').text('åŠ è½½ä¸­...');
            
            // æ¨¡æ‹ŸAPIè°ƒç”¨å»¶è¿Ÿ
            setTimeout(() => {
                const mockData = {
                    'AAPL': { price: 150.20, currency_symbol: '$', market: 'us' },
                    '000001.SZ': { price: 11.84, currency_symbol: 'Â¥', market: 'cn' }
                };
                
                const data = mockData[symbol] || { price: 100.00, currency_symbol: '$', market: 'us' };
                const currencySymbol = data.currency_symbol || getCurrencySymbol(symbol);
                
                $('#dynamic-price').html(`
                    <span style="color: green; font-weight: bold;">
                        ${currencySymbol}${data.price.toFixed(2)}
                    </span>
                    <small style="color: #666; margin-left: 10px;">
                        (${data.market.toUpperCase()} å¸‚åœº)
                    </small>
                `);
            }, 1000);
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æµ‹è¯•
        $(document).ready(function() {
            console.log('è´§å¸æ˜¾ç¤ºä¿®å¤æµ‹è¯•é¡µé¢å·²åŠ è½½');
        });
    </script>
</body>
</html> 